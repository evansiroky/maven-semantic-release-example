language: java

# This library uses Java 8 features and Travis doesn't (yet) support OpenJDK 8
jdk:
  - oraclejdk8

# Replace Travis's default Maven installation step with a no-op.
# This avoids redundantly pre-running 'mvn install -DskipTests' every time.
install:
  - yarn

# Replace Travis's default build step.
# Run all Maven phases at once up through verify, install, and deploy.
script:
  - mvn package

after_success:
  - node release.js

# If sudo is disabled, CI runs on container based infrastructure (allows caching &c.)
sudo: false

# Retain the local Maven repository to speed up builds.
cache:
  directories:
    - "$HOME/.m2/repository"
    - "$HOME/.yarn-cache"