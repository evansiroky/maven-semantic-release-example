# run a node.js script to use code from semantic-release
after_success:
  - node release-cli.js --debug
cache:
  directories:
    - $HOME/.m2/repository
    - $HOME/.yarn-cache
# yarn is used to run to release script which runs part of the node.js semantic-release library
install:
  - yarn
jdk:
  - oraclejdk8
language: java
notifications:
  email: false
script:
  - mvn package
sudo: false
before_install: |
  # only install signing keys under the same circumstances we do a mvn deploy later
  if [[ "$TRAVIS_PULL_REQUEST" = false ]] && [[ "$TRAVIS_BRANCH" = master ]]; then
    openssl aes-256-cbc -K $encrypted_319571283a54_key -iv $encrypted_319571283a54_iv -in maven-artifact-signing-key.asc.enc -out maven-artifact-signing-key.asc -d
    gpg --import --batch maven-artifact-signing-key.asc
  fi
env:
  global:
    secure: bVMJYzh2fR8Bebm/n1sg61TCpyqqvIspB5m+Z8r0tEEHNH6wkEikPCILP9fx4SG1idVvMQUHmIWpVkhiR+psXL9uWmNlbSED7kvi/JpckvcqrgocQivtkRKHz4PzKPB0J7QiKWP09veJ8gRA6mYgb9q82Q1PnEvouRwB+XveO4ZYh5EMUqKttCnKuZpFL0tIvhTspakGa5gnyRjUMzKtvy5V5UBdDtlKC0Hk8rLbfuIL/sTS5nslvVy7WXMRe5LU5vQmylNSedg/82TDfW4f/q2SWTc1xzXeJPydmB5q7QZFLep6cGWY/Eanyi1Ue0fce9jAZRd/pRMS4UXwIugLBTWKZaOUUf8qv/F3ctKF0U63obfja3PJYFFGu3TdA03DmICxAuileLpAmFUF888wymeVLCoFG213LMIPAYIil2ispuMel13pzrYEF5xAgPmya3iEXMTHKaGrsGNqemg9OP9ycvFwIRvTJjNWL3DjoaFRyz6WTLD7hoTPtz/dntoNR8+3cpbuLsfYlVKibJySdpa/32fZKwXlSrT7jPRNp7pqa/iVvTAwg6RQcfyvfW2GPmO+lFJJ5+UWNbmhb26uv9FWXtiWsXb+bdr66wYACU/b7ggptuXY/Yqy0UnCFZKncLEQLMC1dN7eadEN73hiU5c+ogwXkvrMhf8wQpAHUbk=
